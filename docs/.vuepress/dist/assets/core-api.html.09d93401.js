import{_ as u,K as c,j as d,k,O as r,L as a,U as e,P as n,m as s,a5 as o}from"./app.55b70317.js";import"./vendor.1dbf7b49.js";const m={},v=n("h1",{id:"api",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#api","aria-hidden":"true"},"#"),s(" API")],-1),h=n("h2",{id:"expose-function",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#expose-function","aria-hidden":"true"},"#"),s(" expose Function")],-1),g=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// ..."),s(`
`),n("span",{class:"token function"},"expose"),n("span",{class:"token punctuation"},"("),s("frontendDescription"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// Returns a Promise<ContextApi>"),s(`
`),n("span",{class:"token comment"},"// ..."),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),b=n("strong",null,"Context",-1),f=n("a",{href:"#frontend-description"},[n("strong",null,"Frontend Description Object")],-1),y=n("h2",{id:"collage-fragment-custom-element",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#collage-fragment-custom-element","aria-hidden":"true"},"#"),s(" <collage-fragment> custom element")],-1),x=n("div",{class:"language-html line-numbers-mode","data-ext":"html"},[n("pre",{class:"language-html"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("collage-fragment")]),s(` 
  `),n("span",{class:"token attr-name"},"url"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("http://path/to/the/child.html"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("collage-fragment")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),w=n("p",null,[s("Composing an application that uses other fragments as "),n("em",null,"children"),s(" is enabled by the use of the "),n("code",null,"collage-fragment"),s(" custom element.")],-1),j=n("p",null,[s("The name property is required, if you want to integrate it in a way that fragments can communicate and share functionality with each other. If you just want to embed a fragment in the arrangement, you simply can omit it. A frontend without it can exist on your page and interact with "),n("strong",null,[n("a",{href:"#topics-api"},"topics")]),s(".")],-1),_=n("p",null,"However a fragment integrated this way lives on its own - like in an iframe. Other parts of the arrangement have no access to its features.",-1),T=n("p",null,"If you wish to be able to call functions that the contained fragment exposes, you need to express a name by which you plan to interact with the child via code. This way, when your app initializes with Collage, you will find all functions, exposed by the child fragment accessable on your context under the given name.",-1),C=n("div",{class:"language-html line-numbers-mode","data-ext":"html"},[n("pre",{class:"language-html"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("collage-fragment")]),s(`
  `),n("span",{class:"token attr-name"},"url"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("http://path/to/the/child.html"),n("span",{class:"token punctuation"},'"')]),s(`
  `),n("span",{class:"token attr-name"},"name"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("myFragment"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("collage-fragment")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),A=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"fragments"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(" myFragment "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  services`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"expose"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token function"},"onClickAt"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"#btn-cast-spell"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  myFragment`),n("span",{class:"token punctuation"},"."),s("functions"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"doSomeThing"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"with a value"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),I=o(`<p>To be sure, that the initialization process is completed and the embedded fragment can be used on the arrangement, there is a sugar method called <em>onLoaded</em>. This function takes the name of a fragment as first parameter and a callback as second.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">onLoaded</span><span class="token punctuation">(</span><span class="token string">&quot;myFragment&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>fragments<span class="token punctuation">.</span>myFragment<span class="token punctuation">.</span>functions<span class="token punctuation">.</span><span class="token function">doSomeThing</span><span class="token punctuation">(</span><span class="token string">&quot;with a value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="frontend-description" tabindex="-1"><a class="header-anchor" href="#frontend-description" aria-hidden="true">#</a> Frontend Description</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// ...</span>
<span class="token keyword">const</span> frontendDescription <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">services</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">/*...*/</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">functions</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">/*...*/</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fragmentsConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">/*...*/</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> contextApi <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">expose</span><span class="token punctuation">(</span>frontendDescription<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A Context is described by a Frontend Description Object. It consists of three parts, describing the capabilities, behavior and identity of a fragment. Each part is optional, you can combine them as it suites your use case.</p><h3 id="services" tabindex="-1"><a class="header-anchor" href="#services" aria-hidden="true">#</a> Services</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">services</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">myService</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// do something</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),S=n("strong",null,"Services",-1),F=n("code",null,"services",-1),P=o(`<p>Services can either be defined singular - like <code>myService(value)</code> from the example, or be combined into a service collection - like <code>myNamedServices</code>. This especially comes in handy when you import services from third party modules.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> contextApi <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">expose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">services</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">myService</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
      <span class="token comment">// do something</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">myNamedServices</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something else </span>
      <span class="token punctuation">}</span>
      <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// again, something else </span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// this is how to call the defined services</span>
context<span class="token punctuation">.</span>services<span class="token punctuation">.</span><span class="token function">myService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span>services<span class="token punctuation">.</span>myNamedServices<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span>services<span class="token punctuation">.</span>myNamedServices<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="coming-soon-service-with-versions" tabindex="-1"><a class="header-anchor" href="#coming-soon-service-with-versions" aria-hidden="true">#</a> coming soon - Service with Versions</h4>`,3),D=n("details",null,[n("summary",{markdown:"span"},"Services with versions are currently not supported, but will be integrated soon"),n("div",{style:{opacity:"0.65",border:"solid 1px","border-radius":"5px",padding:"0 10px 0 10px"}},[n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" contextApi "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"expose"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"services"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"myService"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"versions"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token string-property property"},"'1.0'"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token function-variable function"},"aFunction"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token string"},"'Hi from myself (version one).'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string-property property"},"'1.2'"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token function-variable function"},"aFunction"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token string"},"'Hi from myself (improved version one).'"),s(),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

context`),n("span",{class:"token punctuation"},"."),s("services"),n("span",{class:"token punctuation"},"."),s("myService"),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'1.2'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"aFunction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"then"),n("span",{class:"token punctuation"},"("),s("console"),n("span",{class:"token punctuation"},"."),s("log"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])])])],-1),L=o(`<h3 id="functions" tabindex="-1"><a class="header-anchor" href="#functions" aria-hidden="true">#</a> Functions</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">functions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;I was called directly&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In contrast to Services, Functions can be called on Contexts directly. Also, the Context calling a function does not need to expose the function it wants to call itself.</p>`,3),q=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token function"},"expose"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"functions"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"doSomething"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"value"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'I was called directly'"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token function"},"doAnotherThing"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string"},"'A value'"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),E=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" contextApi "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"expose"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
context`),n("span",{class:"token punctuation"},"."),s("fragments"),n("span",{class:"token punctuation"},"."),s("namedChild"),n("span",{class:"token punctuation"},"."),s("functions"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"doSomething"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'my value'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("div",{class:"highlight-line"}," ")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),U=o(`<h3 id="config" tabindex="-1"><a class="header-anchor" href="#config" aria-hidden="true">#</a> Config</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">fragmentsConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&#39;myFragment&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">configParam1</span><span class="token operator">:</span> <span class="token string">&#39;some value&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">configParam2</span><span class="token operator">:</span> <span class="token string">&#39;some other value&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The arrangement Configuration (aka fragmentsConfig) allows an arrangement to overwrite a default configuration of its contained fragments. To do so, an arrangement can define config objects in three different ways which then are merged to a final config object under the hood.</p><p>Collage will merge configurations for specific fragments in following hierarchical order:</p><ol><li>a config object relating to the fragments <strong>url</strong></li><li>a config object relating to the <strong>name</strong> of the fragment</li><li>the config properties on the &lt;collage-fragment&gt; element</li></ol>`,5),N=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"expose"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"fragmentsConfig"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token string-property property"},"'http://path/to/the/child.html'"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"title"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'by url'"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"value"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'url'"),s(`
      `),n("span",{class:"token literal-property property"},"cards"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'by url'"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"mode"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'embedded'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token comment"},"// { ... configurations of other fragment }"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),O=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"expose"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"fragmentsConfig"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token string-property property"},"'myFragment'"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"title"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'by name'"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"value"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'name'"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"cards"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"mode"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'embedded'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token comment"},"// { ... configurations of other fragment }"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),M=n("div",{class:"language-html line-numbers-mode","data-ext":"html"},[n("pre",{class:"language-html"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("collage-fragment")]),s(`
  `),n("span",{class:"token attr-name"},"url"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("http://path/to/the/child.html"),n("span",{class:"token punctuation"},'"')]),s(`
  `),n("span",{class:"token attr-name"},"name"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("myFragment"),n("span",{class:"token punctuation"},'"')]),s(`
  `),n("span",{class:"token attr-name"},"config-title"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("by property"),n("span",{class:"token punctuation"},'"')]),s(`
  `),n("span",{class:"token attr-name"},"config-cards"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("3"),n("span",{class:"token punctuation"},'"')]),s(`
  `),n("span",{class:"token attr-name"},"config-mode"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("embedded"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("collage-fragment")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),V=o(`<p>The configs above would combine to a config object for the fragment <code>myFragment</code> with the following properties:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;by property&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;by name&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">cards</span><span class="token operator">:</span> <span class="token string">&#39;3&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token string">&#39;by url&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;embedded&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>It is important to understand, that the config is always set from the containing arrangement to the contained fragment. A fragment does not expose a configuration in it&#39;s FrontendDescription.</p></div><h4 id="using-config-as-fragment" tabindex="-1"><a class="header-anchor" href="#using-config-as-fragment" aria-hidden="true">#</a> Using config as Fragment</h4><p>Via the merged config object is accessible via the <a href="#context-api"><strong>Context API</strong></a></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> contextApi <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// is an empty object, if the arrangement does not provide a </span>
<span class="token comment">// config for this fragment or if the fragment is standalone</span>
<span class="token keyword">const</span> mergedConfig <span class="token operator">=</span> contextApi<span class="token punctuation">.</span>config<span class="token punctuation">;</span>

<span class="token keyword">const</span> fragmentConfiguration <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;My own title&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">cards</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;standalone&#39;</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>mergedConfig <span class="token comment">// merge the config provided by the arrangement </span>
                  <span class="token comment">// with the fragments own config</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It takes some time for the arrangement to overwrite the config of its fragment. To be sure that the config was updated from the arrangement, the sugar method <em>onConfigUpdated</em> can be used. This function takes a callback, which it will execute, when the config was updated. But be careful: if there is no arrangement or the config is not overwritten, this callback will never be executed!</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> contextApi <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">onConfigUpdated</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> config <span class="token operator">=</span> contextApi<span class="token punctuation">.</span>config<span class="token punctuation">;</span>
  <span class="token keyword">const</span> mergedConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;My own title&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cards</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;standalone&#39;</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>config 
  <span class="token punctuation">}</span><span class="token punctuation">;</span> 
  <span class="token comment">// do something, when the config was updated</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It is also possible to update a configuration of an embedded fragment at a later time. Therefore the <em>updateConfig</em> method exists on embedded named fragments.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>The configuration of the fragment will be completely overwritten by the new config. If a merged configuration with the old config is desired, the merge must be done by yourself.</p></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>  <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;I am embedded&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;embedded&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span> 
  context<span class="token punctuation">.</span>fragments<span class="token punctuation">.</span>myFragment<span class="token punctuation">.</span><span class="token function">updateConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="communication-api" tabindex="-1"><a class="header-anchor" href="#communication-api" aria-hidden="true">#</a> Communication API</h2><p>Collage provides several APIs for different tasks of communication inside the application.</p><h3 id="context-api" tabindex="-1"><a class="header-anchor" href="#context-api" aria-hidden="true">#</a> Context API</h3><p>The <a href="#expose-function">expose function</a> returns a ContextApi object:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> contextApi <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">services</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// services exposed by this Context</span>
  <span class="token literal-property property">fragments</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// all contained named fragments</span>
  <span class="token literal-property property">topics</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment">// exposed topics</span>
  <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment">// config described by containing arrangement</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;contextId&#39;</span><span class="token punctuation">,</span>          <span class="token comment">// context id</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,16),z=n("p",null,"The expose function returns a Promise<ContextApi>, so you can simply await on it or do something in its then-callback.",-1),H=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(" contextApi "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"expose"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"services"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"todos"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"topics"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"active"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token comment"},"// ..."),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),B=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token function"},"expose"),n("span",{class:"token punctuation"},"("),n("span",{class:"token comment"},"/* ... */"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"then"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"context"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// ..."),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Y=o(`<h3 id="child-functions" tabindex="-1"><a class="header-anchor" href="#child-functions" aria-hidden="true">#</a> Child Functions</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> contextApi <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">expose</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
contextApi<span class="token punctuation">.</span>fragments<span class="token punctuation">.</span>childName<span class="token punctuation">.</span>functions<span class="token punctuation">.</span><span class="token function">someFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>To use <a href="#functions">functions</a> of the fragment, you need direct access to the fragments Context. You gain that via the Context APIs framents object</p><h3 id="topics-api" tabindex="-1"><a class="header-anchor" href="#topics-api" aria-hidden="true">#</a> Topics API</h3>`,4),G=n("strong",null,"Topics",-1),R=o(`<p>The Topics feature allows an easy way to subscribe to topics and publish new values on them.</p><p>There are two different topic types, that can be used with collage, simple topics and service topics. For both topic types, it is possible to subscribe multiple times for the same topic.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Do not use <code>subscribe</code>, and <code>publish</code> as Topic names or as names for Services with Topics!</p></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>When subscribing to a topic which has never been published a value to, the subscription callback gets initially called with undefined as message.</p></div><h4 id="simple-topics" tabindex="-1"><a class="header-anchor" href="#simple-topics" aria-hidden="true">#</a> Simple Topics</h4><p>Topics are defined dynamically at runtime and don\`t need to be defined in the Frontend Description Object.</p><h5 id="subscribing-to-topics" tabindex="-1"><a class="header-anchor" href="#subscribing-to-topics" aria-hidden="true">#</a> Subscribing to topics</h5><p>To subscribe to a topic, the topic name and a callback is needed. The subscribe returns an unsubscribeCallback, which can be used to unsubscribe again.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> contextApi <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> unsubscribeCallback <span class="token operator">=</span> contextApi<span class="token punctuation">.</span>topics<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&#39;myTopic&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">doSomeThing</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="unsubscribing-a-topic" tabindex="-1"><a class="header-anchor" href="#unsubscribing-a-topic" aria-hidden="true">#</a> Unsubscribing a topic</h5><p>To unsubscribe from a topic just call the unsubscribeCallback.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">unsubscribeCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="publishing-messages" tabindex="-1"><a class="header-anchor" href="#publishing-messages" aria-hidden="true">#</a> Publishing Messages</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> contextApi <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
contextApi<span class="token punctuation">.</span>topics<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&#39;myTopic&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;a new Value&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="service-topics" tabindex="-1"><a class="header-anchor" href="#service-topics" aria-hidden="true">#</a> Service Topics</h4><p>Topics are defined in services at dev-time in the Frontend Description Object, like following:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> frontendDescription <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">services</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">topics</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;myTopic&#39;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> contextApi <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">expose</span><span class="token punctuation">(</span>frontendDescription<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="subscribing-to-topics-1" tabindex="-1"><a class="header-anchor" href="#subscribing-to-topics-1" aria-hidden="true">#</a> Subscribing to topics</h5><p>To subscribe to a topic, the topic name and a callback is needed. The subscribe returns an unsubscribeCallback, which is needed to unsubscribe again.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> unsubscribeCallback <span class="token operator">=</span> contextApi<span class="token punctuation">.</span>topics<span class="token punctuation">.</span>foo<span class="token punctuation">.</span>myTopic<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">doSomeThing</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="unsubscribing-a-topic-1" tabindex="-1"><a class="header-anchor" href="#unsubscribing-a-topic-1" aria-hidden="true">#</a> Unsubscribing a topic</h5><p>To unsubscribe from a topic, just call the unsubscribeCallback.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">unsubscribeCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="publishing-messages-1" tabindex="-1"><a class="header-anchor" href="#publishing-messages-1" aria-hidden="true">#</a> Publishing Messages</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>contextApi<span class="token punctuation">.</span>topics<span class="token punctuation">.</span>foo<span class="token punctuation">.</span>myTopic<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&#39;a new Value&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="lifecycle-hooks" tabindex="-1"><a class="header-anchor" href="#lifecycle-hooks" aria-hidden="true">#</a> Lifecycle Hooks</h3><p>Collage is asynchronous. To trigger certain activities in an Arrangement or Fragment, you can use Lifecycle Hooks.</p><p>A hook returns a function, which can be executed to deregister the hook (analogous to addEventListener and removeEventListener).</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Register a hook</span>
<span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> deregisterHook <span class="token operator">=</span> <span class="token function">onUpdated</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 context<span class="token punctuation">.</span>fragments<span class="token punctuation">.</span>myFragment<span class="token punctuation">.</span>functions<span class="token punctuation">.</span><span class="token function">doSomeThing</span><span class="token punctuation">(</span><span class="token string">&quot;with a value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Deregister</span>
<span class="token function">deregisterHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><br><br><div class="highlight-line"> </div><br><br><br><br><div class="highlight-line"> </div></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A hook accepts an options argument, which takes the same options analogous to addEventListener.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// EventListenerOptions</span>
<span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> context<span class="token punctuation">.</span>fragments<span class="token punctuation">.</span>myFragment<span class="token punctuation">.</span>functions<span class="token punctuation">.</span><span class="token function">doSomeThing</span><span class="token punctuation">(</span><span class="token string">&quot;with a value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">once</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// Callback will only be executed once.</span>
<span class="token comment">// No need for using the returned deregister function</span>
<span class="token function">onUpdated</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="onloaded" tabindex="-1"><a class="header-anchor" href="#onloaded" aria-hidden="true">#</a> onLoaded</h5><p>To be sure, that the initialization process is completed and the embedded fragment can be used on the arrangement, this hook exists. This hook takes the name of a fragment as first parameter and a callback as second. The third parameter is optional and represents the options argument of addEventListener.</p><p>The onLoaded hook Executes a callback if a fragment with a specific name is loaded.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">onLoaded</span><span class="token punctuation">(</span><span class="token string">&quot;myFragment&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 context<span class="token punctuation">.</span>fragments<span class="token punctuation">.</span>myFragment<span class="token punctuation">.</span>functions<span class="token punctuation">.</span><span class="token function">doSomeThing</span><span class="token punctuation">(</span><span class="token string">&quot;with a value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The onLoaded hook is based on the <code>collage-fragment-loaded</code> event, which is dispatched, if an embedded fragment is completed with the initial loading. The event emits the context id of the fragment, which was loaded. You can use the event if necessary, but you should prefere the hook.</p><h5 id="onupdated" tabindex="-1"><a class="header-anchor" href="#onupdated" aria-hidden="true">#</a> onUpdated</h5><p>Executes a callback if the context of this fragment is updated. This hook takes a callback as first parameter. The second parameter is optional and represents the options argument of addEventListener.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">expose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">services</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token function-variable function">doSomething</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">onUpdated</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token comment">// E.g. service from parent can be used. Not own implementation</span>
 context<span class="token punctuation">.</span>services<span class="token punctuation">.</span><span class="token function">doSomeThing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The onUpdated hook is based on the <code>collage-context-updated</code> event, which is dispatched, everytime something on the own context changed. The event emits the updated context. You can use the event if necessary, but you should prefere the hook.</p><h5 id="onconfigupdated" tabindex="-1"><a class="header-anchor" href="#onconfigupdated" aria-hidden="true">#</a> onConfigUpdated</h5><p>Executes a callback if the config of this context was updated. This hook takes a callback as first parameter. The second parameter is optional and represents the options argument of addEventListener.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">expose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">onConfigUpdated</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token keyword">const</span> mergedConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;My own title&#39;</span><span class="token punctuation">,</span>
   <span class="token literal-property property">cards</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
   <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;standalone&#39;</span><span class="token punctuation">,</span>
   <span class="token operator">...</span>context<span class="token punctuation">.</span>config<span class="token punctuation">,</span> 
 <span class="token punctuation">}</span><span class="token punctuation">;</span> 
 <span class="token comment">// do something, when the config was updated</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The onUpdated hook is based on the <code>collage-context-updated</code> event, which is dispatched, everytime something on the own context changed. The event emits the updated context. You can use the event if necessary, but you should prefere the hook.</p><h3 id="deregistering-a-fragment" tabindex="-1"><a class="header-anchor" href="#deregistering-a-fragment" aria-hidden="true">#</a> Deregistering a fragment</h3><p>If you want to remove a fragment from your arrangement, just remove it from the DOM. Collage takes care that the parents context gets cleaned up.</p>`,46),W={class:"custom-container tip"},K=n("p",{class:"custom-container-title"},"TIP",-1),J={href:"https://developer.mozilla.org/en-US/docs/Web/API/Element/remove",target:"_blank",rel:"noopener noreferrer"},Q={href:"https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild",target:"_blank",rel:"noopener noreferrer"},X=n("p",null,"If you are using a framework managing the DOM, please see the specific frameworks documentation.",-1);function Z($,nn){const t=c("CodeGroupItem"),p=c("CodeGroup"),i=c("RouterLink"),l=c("ExternalLinkIcon");return d(),k("div",null,[v,r(" TODO: Complete API description "),h,a(p,null,{default:e(()=>[a(t,{title:"src/api/index.ts>expose"},{default:e(()=>[g]),_:1})]),_:1}),n("p",null,[s("By calling the expose function, an HTML Document is automatically upgraded to a "),a(i,{to:"/docs/concepts.html#context"},{default:e(()=>[b]),_:1}),s(". It is now embeddable and can embedd other Contexts. The expose function can be called without a parameter, to just enable the basic Context features or called with a "),f,s(" as parameter, to enable more features of Collage.")]),y,a(p,null,{default:e(()=>[a(t,{title:"index.html"},{default:e(()=>[x]),_:1})]),_:1}),w,j,r(` TODO: add following text, when DAVIAF-109 is done:
Collage takes care that the styling of the arrangement is **[synchronized](#style-synchronization)**.
`),_,T,a(p,null,{default:e(()=>[a(t,{title:"index.html"},{default:e(()=>[C]),_:1}),a(t,{title:"main.js"},{default:e(()=>[A]),_:1})]),_:1}),I,n("p",null,[a(i,{to:"/docs/concepts.html#service"},{default:e(()=>[S]),_:1}),s(" are one of the core concepts of Collage. You define services in the "),F,s(" object of the Frontend Description object.")]),P,D,L,a(p,null,{default:e(()=>[a(t,{title:"fragment.js"},{default:e(()=>[q]),_:1}),a(t,{title:"arrangement.js"},{default:e(()=>[E]),_:1})]),_:1}),U,a(p,null,{default:e(()=>[a(t,{title:"least-specific"},{default:e(()=>[N]),_:1}),a(t,{title:"middle-specific"},{default:e(()=>[O]),_:1}),a(t,{title:"most-specific"},{default:e(()=>[M]),_:1})]),_:1}),V,n("p",null,[s("By calling the expose function, you get access to the Context API. You can call services, access named children (see "),a(i,{to:"/docs/concepts.html#initializing-and-exposing"},{default:e(()=>[s("Initializing and Exposing")]),_:1}),s("), config and id as well as publish and subscribe to topics.")]),z,a(p,null,{default:e(()=>[a(t,{title:"await"},{default:e(()=>[H]),_:1}),a(t,{title:"then()"},{default:e(()=>[B]),_:1})]),_:1}),Y,n("p",null,[s("See "),a(i,{to:"/docs/concepts.html#topics"},{default:e(()=>[G]),_:1}),s(" in the "),a(i,{to:"/docs/concepts/"},{default:e(()=>[s("Concepts description")]),_:1}),s(".")]),R,n("div",W,[K,n("p",null,[s("There are several possibilities how to remove an HTML Element from the DOM, for a reference, please see "),n("a",J,[s("'Element.remove() - mdn web docs'"),a(l)]),s(" or "),n("a",Q,[s("'Node.removeChild() - mnd web docs'"),a(l)]),s(".")]),X])])}const en=u(m,[["render",Z],["__file","core-api.html.vue"]]);export{en as default};
